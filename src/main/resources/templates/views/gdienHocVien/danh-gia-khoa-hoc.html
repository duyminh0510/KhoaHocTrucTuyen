<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Đánh giá khóa học - [[${khoaHoc.tenKhoaHoc}]]</title>
    <link rel="stylesheet" href="/css/hocVien/danh-gia-khoa-hoc.css">
</head>
<body>
    <div class="rating-container">
        <!-- Header -->
        <div class="rating-header">
            <a href="/hoc-vien/khoa-hoc-da-mua" class="btn-back">
                <i class="fas fa-arrow-left"></i> Quay lại
            </a>
            <h1>Đánh giá khóa học</h1>
        </div>

        <!-- Thông tin khóa học -->
        <div class="course-info">
            <img th:src="@{'/photos/' + ${khoaHoc.anhBia}}" alt="Ảnh khóa học" class="course-thumb" />
            <div class="course-details">
                <h2 th:text="${khoaHoc.tenKhoaHoc}">Tên khóa học</h2>
                <p class="instructor">Giảng viên: <span th:text="${khoaHoc.giangVien}">Tên giảng viên</span></p>
                <p class="description" th:text="${khoaHoc.moTa}">Mô tả khóa học</p>
            </div>
        </div>

        <!-- Form đánh giá -->
        <div class="rating-form">
            <form th:action="@{'/danh-gia/khoa-hoc/' + ${khoaHoc.id}}" method="post">
                <!-- Đánh giá sao -->
                <div class="rating-section">
                    <h3>Đánh giá tổng quan</h3>
                    <div class="star-rating">
                        <input type="radio" id="star5" name="diemDanhGia" value="5" required>
                        <label for="star5" class="star">★</label>
                        <input type="radio" id="star4" name="diemDanhGia" value="4">
                        <label for="star4" class="star">★</label>
                        <input type="radio" id="star3" name="diemDanhGia" value="3">
                        <label for="star3" class="star">★</label>
                        <input type="radio" id="star2" name="diemDanhGia" value="2">
                        <label for="star2" class="star">★</label>
                        <input type="radio" id="star1" name="diemDanhGia" value="1">
                        <label for="star1" class="star">★</label>
                    </div>
                    <p class="rating-text">Chọn số sao để đánh giá khóa học</p>
                </div>

                <!-- Nội dung đánh giá -->
                <div class="content-section">
                    <h3>Nội dung đánh giá</h3>
                    <div class="form-group">
                        <label for="noiDung">Chia sẻ trải nghiệm của bạn về khóa học:</label>
                        <textarea id="noiDung" name="noiDung" rows="6" 
                                  placeholder="Hãy chia sẻ những gì bạn thích hoặc không thích về khóa học này. Điều gì làm cho khóa học này đặc biệt? Bạn có gợi ý gì để cải thiện khóa học không?"
                                  required></textarea>
                        <div class="char-count">
                            <span id="charCount">0</span>/1000 ký tự
                        </div>
                    </div>
                </div>

                <!-- Các tiêu chí đánh giá chi tiết -->
                <div class="criteria-section">
                    <h3>Đánh giá chi tiết</h3>
                    
                    <div class="criteria-item">
                        <label>Chất lượng nội dung:</label>
                        <div class="criteria-rating">
                            <input type="radio" name="chatLuongNoiDung" value="5" id="noidung5">
                            <label for="noidung5">5</label>
                            <input type="radio" name="chatLuongNoiDung" value="4" id="noidung4">
                            <label for="noidung4">4</label>
                            <input type="radio" name="chatLuongNoiDung" value="3" id="noidung3">
                            <label for="noidung3">3</label>
                            <input type="radio" name="chatLuongNoiDung" value="2" id="noidung2">
                            <label for="noidung2">2</label>
                            <input type="radio" name="chatLuongNoiDung" value="1" id="noidung1">
                            <label for="noidung1">1</label>
                        </div>
                    </div>

                    <div class="criteria-item">
                        <label>Phương pháp giảng dạy:</label>
                        <div class="criteria-rating">
                            <input type="radio" name="phuongPhapGiangDay" value="5" id="giangday5">
                            <label for="giangday5">5</label>
                            <input type="radio" name="phuongPhapGiangDay" value="4" id="giangday4">
                            <label for="giangday4">4</label>
                            <input type="radio" name="phuongPhapGiangDay" value="3" id="giangday3">
                            <label for="giangday3">3</label>
                            <input type="radio" name="phuongPhapGiangDay" value="2" id="giangday2">
                            <label for="giangday2">2</label>
                            <input type="radio" name="phuongPhapGiangDay" value="1" id="giangday1">
                            <label for="giangday1">1</label>
                        </div>
                    </div>

                    <div class="criteria-item">
                        <label>Tính thực tế:</label>
                        <div class="criteria-rating">
                            <input type="radio" name="tinhThucTe" value="5" id="thucte5">
                            <label for="thucte5">5</label>
                            <input type="radio" name="tinhThucTe" value="4" id="thucte4">
                            <label for="thucte4">4</label>
                            <input type="radio" name="tinhThucTe" value="3" id="thucte3">
                            <label for="thucte3">3</label>
                            <input type="radio" name="tinhThucTe" value="2" id="thucte2">
                            <label for="thucte2">2</label>
                            <input type="radio" name="tinhThucTe" value="1" id="thucte1">
                            <label for="thucte1">1</label>
                        </div>
                    </div>

                    <div class="criteria-item">
                        <label>Hỗ trợ học viên:</label>
                        <div class="criteria-rating">
                            <input type="radio" name="hoTroHocVien" value="5" id="hotro5">
                            <label for="hotro5">5</label>
                            <input type="radio" name="hoTroHocVien" value="4" id="hotro4">
                            <label for="hotro4">4</label>
                            <input type="radio" name="hoTroHocVien" value="3" id="hotro3">
                            <label for="hotro3">3</label>
                            <input type="radio" name="hoTroHocVien" value="2" id="hotro2">
                            <label for="hotro2">2</label>
                            <input type="radio" name="hoTroHocVien" value="1" id="hotro1">
                            <label for="hotro1">1</label>
                        </div>
                    </div>
                </div>

                <!-- Buttons -->
                <div class="form-actions">
                    <button type="button" class="btn-cancel" onclick="history.back()">Hủy</button>
                    <button type="submit" class="btn-submit">Gửi đánh giá</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Character counter
        const textarea = document.getElementById('noiDung');
        const charCount = document.getElementById('charCount');
        
        textarea.addEventListener('input', function() {
            const length = this.value.length;
            charCount.textContent = length;
            
            if (length > 1000) {
                charCount.style.color = '#dc3545';
            } else {
                charCount.style.color = '#6c757d';
            }
        });

        // Star rating hover effect
        const stars = document.querySelectorAll('.star-rating .star');
        const starInputs = document.querySelectorAll('.star-rating input[type="radio"]');

        stars.forEach((star, index) => {
            star.addEventListener('mouseenter', function() {
                // Reset all stars
                stars.forEach(s => s.classList.remove('hover'));
                
                // Add hover class to current and previous stars
                for (let i = 0; i <= index; i++) {
                    stars[i].classList.add('hover');
                }
            });

            star.addEventListener('mouseleave', function() {
                stars.forEach(s => s.classList.remove('hover'));
                
                // Show selected stars
                const checkedInput = document.querySelector('.star-rating input[type="radio"]:checked');
                if (checkedInput) {
                    const checkedIndex = Array.from(starInputs).indexOf(checkedInput);
                    for (let i = 0; i <= checkedIndex; i++) {
                        stars[i].classList.add('selected');
                    }
                }
            });

            star.addEventListener('click', function() {
                // Remove selected class from all stars
                stars.forEach(s => s.classList.remove('selected'));
                
                // Add selected class to current and previous stars
                for (let i = 0; i <= index; i++) {
                    stars[i].classList.add('selected');
                }
            });
        });

        // Criteria rating hover effect
        const criteriaRatings = document.querySelectorAll('.criteria-rating');
        criteriaRatings.forEach(rating => {
            const labels = rating.querySelectorAll('label');
            const inputs = rating.querySelectorAll('input[type="radio"]');

            labels.forEach((label, index) => {
                label.addEventListener('mouseenter', function() {
                    labels.forEach(l => l.classList.remove('hover'));
                    for (let i = 0; i <= index; i++) {
                        labels[i].classList.add('hover');
                    }
                });

                label.addEventListener('mouseleave', function() {
                    labels.forEach(l => l.classList.remove('hover'));
                    
                    const checkedInput = rating.querySelector('input[type="radio"]:checked');
                    if (checkedInput) {
                        const checkedIndex = Array.from(inputs).indexOf(checkedInput);
                        for (let i = 0; i <= checkedIndex; i++) {
                            labels[i].classList.add('selected');
                        }
                    }
                });

                label.addEventListener('click', function() {
                    labels.forEach(l => l.classList.remove('selected'));
                    for (let i = 0; i <= index; i++) {
                        labels[i].classList.add('selected');
                    }
                });
            });
        });
    </script>
</body>
</html> 