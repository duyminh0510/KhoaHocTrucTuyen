<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Trang ch·ªß h·ªçc vi√™n</title>
    <link rel="stylesheet" href="/css/hocVien/home-hoc-vien.css">
    <link rel="stylesheet" href="/css/hocVien/home-hoc-vien-courses.css">
</head>
<body>
<div class="container">
    <main class="main-content" style="position:relative;">
        <h2 class="main-title">Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi h·ªá th·ªëng h·ªçc tr·ª±c tuy·∫øn!</h2>
        <p style="font-size:18px; color:#22314f; margin-bottom:32px;">Kh√°m ph√° c√°c kho√° h·ªçc n·ªïi b·∫≠t v√† b·∫Øt ƒë·∫ßu h√†nh tr√¨nh h·ªçc t·∫≠p c·ªßa m√¨nh.</p>
        <div style="display:flex; justify-content:center; gap:32px; margin-top:40px;">
            <a href="/hoc-vien/khoa-hoc-da-mua" class="btn-big">
                <span style="font-size:28px; vertical-align:middle; margin-right:12px;">üìö</span>
                <span style="font-size:22px; vertical-align:middle; font-weight:600;">Kho√° h·ªçc ƒë√£ mua</span>
                <div style="font-size:15px; color:#555; margin-top:6px;">Xem danh s√°ch v√† truy c·∫≠p c√°c kho√° h·ªçc b·∫°n ƒë√£ ƒëƒÉng k√Ω</div>
            </a>
            <a href="/hoc-vien/lich-su-giao-dich" class="btn-big">
                <span style="font-size:28px; vertical-align:middle; margin-right:12px;">üí≥</span>
                <span style="font-size:22px; vertical-align:middle; font-weight:600;">L·ªãch s·ª≠ giao d·ªãch</span>
                <div style="font-size:15px; color:#555; margin-top:6px;">Xem c√°c giao d·ªãch ƒë√£ th·ª±c hi·ªán</div>
            </a>
        </div>
        <h3 style="margin-top:56px; font-size:22px; color:#22314f; font-weight:600;">Kho√° h·ªçc n·ªïi b·∫≠t</h3>
        <div class="courses-grid">
            <th:block th:each="khoaHoc : ${khoaHocList}">
                <div class="course-card">
                    <img th:src="${khoaHoc.anhBia != null ? '/photos/' + khoaHoc.anhBia : '/photos/logochinh.png'}" alt="·∫¢nh kho√° h·ªçc" class="course-thumb" />
                    <div class="course-info">
                        <div class="course-title" th:text="${khoaHoc.tenKhoaHoc}"></div>
                        <div class="course-desc" th:text="${#strings.abbreviate(khoaHoc.moTa, 80)}"></div>
                        <div class="course-price">
                            <span th:if="${khoaHoc.giaKhuyenMai != null}" th:text="${#numbers.formatDecimal(khoaHoc.giaKhuyenMai, 0, 'COMMA', 0, 'POINT')} + ' ƒë'"></span>
                            <span th:if="${khoaHoc.giaKhuyenMai == null}" th:text="${#numbers.formatDecimal(khoaHoc.giagoc, 0, 'COMMA', 0, 'POINT')} + ' ƒë'"></span>
                        </div>
                    </div>
                    <div class="course-actions">
                        <a th:href="@{/hoc-vien/khoa-hoc/{id}(id=${khoaHoc.courseId})}" class="btn-detail">Xem chi ti·∫øt</a>
                        <button type="button" class="btn-detail btn-outline" th:attr="onclick='showShareForm(' + ${khoaHoc.courseId} + ')'">Share</button>
                        <div class="share-form" th:attr="id='share-form-' + ${khoaHoc.courseId}" style="display:none; position:absolute; background:#fff; border:1px solid #ccc; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.08); padding:16px; z-index:100; margin-top:8px;">
                            <div style="font-size:15px; margin-bottom:8px; color:#22314f; font-weight:600;">Chia s·∫ª kho√° h·ªçc</div>
                            <input type="text" style="width:260px; padding:6px 10px; border-radius:6px; border:1px solid #bbb; font-size:15px;" readonly th:value="'/hoc-vien/khoa-hoc/' + ${khoaHoc.courseId}" th:attr="id='share-link-' + ${khoaHoc.courseId}">
                            <button type="button" class="btn-detail btn-outline" style="margin-left:8px;" th:attr="onclick='copyShareLink(' + ${khoaHoc.courseId} + ')'" th:attrappend="id='btn-copy-' + ${khoaHoc.courseId}">Copy</button>
                            <span class="copy-tick" th:attr="id='tick-' + ${khoaHoc.courseId}" style="display:none; color:green; font-size:20px; margin-left:6px; vertical-align:middle;">‚úî</span>
                            <button type="button" class="btn-detail btn-outline" style="margin-left:8px;" th:attr="onclick='hideShareForm(' + ${khoaHoc.courseId} + ')'">ƒê√≥ng</button>
                        </div>
                    </div>
                </div>
            </th:block>
        </div>
    </main>
</div>
<script>
function showShareForm(id) {
    document.querySelectorAll('.share-form').forEach(f => f.style.display = 'none');
    var form = document.getElementById('share-form-' + id);
    if(form) form.style.display = 'block';
}
function hideShareForm(id) {
    var form = document.getElementById('share-form-' + id);
    if(form) form.style.display = 'none';
}
function copyShareLink(id) {
    var input = document.getElementById('share-link-' + id);
    var link = input.value;
    if(link.startsWith('/')) {
        link = window.location.origin + link;
    }
    var temp = document.createElement('input');
    document.body.appendChild(temp);
    temp.value = link;
    temp.select();
    temp.setSelectionRange(0, 99999);
    document.execCommand('copy');
    document.body.removeChild(temp);
    // Hi·ªán d·∫•u tick
    var tick = document.getElementById('tick-' + id);
    if(tick) {
        tick.style.display = 'inline';
        setTimeout(function() { tick.style.display = 'none'; }, 1500);
    }
}
</script>
</body>
</html> 