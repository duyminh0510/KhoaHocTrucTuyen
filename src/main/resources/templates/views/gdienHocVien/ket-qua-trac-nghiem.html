<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Kết quả bài trắc nghiệm</title>
    <link rel="stylesheet" th:href="@{/css/hocVien/ket-qua-trac-nghiem.css}">
</head>
<body>
<div class="result-container">
    <div th:if="${ketQua}">
        <div class="result-header">
            <h1>Kết quả bài trắc nghiệm</h1>
            <div class="course-title" th:text="${ketQua.baitracnghiem.tenbai}">Tên bài trắc nghiệm</div>
        </div>

        <div class="summary-grid">
            <div class="summary-item">
                <span class="label">Tổng điểm</span>
                <span class="value" th:text="${#numbers.formatDecimal(ketQua.tongDiem, 1, 'COMMA', 2, 'POINT')}">8.5</span>
            </div>
            <div class="summary-item">
                <span class="label">Số câu đúng</span>
                <span class="value" th:text="${ketQua.soCauDung} + '/' + ${#lists.size(ketQua.ketQuaChiTiet)}">17/20</span>
            </div>
            <div class="summary-item">
                <span class="label">Thời gian làm bài</span>
                <span class="value" th:with="duration=${T(java.time.Duration).between(ketQua.thoiGianBatDau, ketQua.thoiGianKetThuc)}">
                    <span th:text="${duration.toMinutes()} + ' phút ' + ${duration.toSecondsPart()} + ' giây'">15 phút 30 giây</span>
                </span>
            </div>
        </div>

        <div class="question-list">
            <div th:each="kqct, iterStat : ${ketQua.ketQuaChiTiet}" class="question-item">
                <div class="question-title">
                    <span class="q-index" th:text="'Câu ' + ${iterStat.count} + ':'"></span>
                    <span th:text="${kqct.cauHoi.noiDung}">Nội dung câu hỏi ở đây?</span>
                </div>
                <ul class="answer-list">
                    <li th:each="dapAn : ${kqct.cauHoi.dapAns}"
                        class="answer-item"
                        th:classappend="${dapAn.dapAnDung ? 'correct' : (kqct.dapAnChon == dapAn.id ? 'incorrect' : '')} + ' ' + ${kqct.dapAnChon == dapAn.id ? 'user-choice' : ''}">
                        
                        <span class="icon"></span>
                        <span th:text="${dapAn.noiDung}">Nội dung đáp án</span>
                    </li>
                </ul>
            </div>
        </div>

        <div style="text-align: center;">
            <a href="#" th:href="@{/hoc-tap/{id}(id=${ketQua.baitracnghiem.baiGiang.chuongs.courses.courseId})}" class="back-link">Quay lại khóa học</a>
        </div>
    </div>

    <div th:if="${error}">
        <h2 style="color: #d32f2f; text-align: center;" th:text="${error}">Lỗi sẽ hiển thị ở đây</h2>
    </div>
</div>
</body>
</html> 