<!DOCTYPE html>
<html lang="vi"
    th:replace="~{/views/gdienChung/templateChung.html::view(~{::main}, ~{::title})}">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Đổi mật khẩu</title>

    </head>

    <body>
        <main>
            <div
                style="display: flex; justify-content: center; align-items: center; height: 100vh;">
                <div class="change-password-container">
                    <h2 class="change-password-title">Đổi mật khẩu</h2>

                    <!-- Hiển thị lỗi -->
                    <div
                        th:if="${message != null and message != 'Bạn đã đổi mật khẩu thành công!'}"
                        style="color: red; text-align: center; margin-bottom: 16px;">
                        <span th:text="${message}"></span>
                    </div>

                    <form th:action="@{/doi-mat-khau}" method="post">
                        <label for="currentPassword" class="form-label">Nhập mật
                            khẩu hiện tại</label>
                        <input type="password" id="currentPassword"
                            name="currentPassword" class="form-input" required
                            placeholder="Mật khẩu hiện tại" />

                        <label for="newPassword" class="form-label">Nhập mật
                            khẩu mới</label>
                        <input type="password" id="newPassword"
                            name="newPassword" class="form-input" required
                            placeholder="Mật khẩu mới" />

                        <label for="confirmPassword" class="form-label">Xác nhận
                            mật khẩu mới</label>
                        <input type="password" id="confirmPassword"
                            name="confirmPassword" class="form-input" required
                            placeholder="Nhập lại mật khẩu mới" />

                        <button type="submit" class="submit-btn">Đổi mật
                            khẩu</button>
                    </form>
                </div>
            </div>

            <!-- Modal thông báo thành công -->
            <div id="successModal" class="modal-overlay"
                th:classappend="${message == 'Bạn đã đổi mật khẩu thành công!'} ? '' : ' d-none'">
                <div class="modal-box">
                    <svg width="70" height="70" viewBox="0 0 70 70" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <circle cx="35" cy="35" r="35" fill="#8fd19e" />
                        <path d="M20 36L31 47L50 28" stroke="white"
                            stroke-width="5" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                    <div class="modal-message">Đổi mật khẩu thành công!</div>
                    <button class="modal-close-btn"
                        onclick="closeModal()">Đóng</button>
                </div>
            </div>
            <script>
            function closeModal() {
                const modal = document.getElementById("successModal");
                if (modal) {
                    modal.style.display = "none";
                }
            }

            window.addEventListener("load", function() {
                const modal = document.getElementById("successModal");
                if (modal && !modal.classList.contains("d-none")) {
                    setTimeout(() => {
                        modal.style.display = "none";
                    }, 4000);
                }
            });
        </script>
        </main>

    </body>

</html>