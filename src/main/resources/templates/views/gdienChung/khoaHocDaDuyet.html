<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Khoá học đã duyệt</title>
    <link rel="stylesheet" th:href="@{/css/chung/danh-muc.css}" />
    <link rel="stylesheet" th:href="@{/css/chung/khoa-hoc-da-duyet.css}" />
  </head>
  <body>
    <main class="container mt-4">
      <h2 class="fw-bold mb-4 text-center">Danh sách khoá học đã duyệt</h2>
      <div th:each="dm : ${danhMucList}" class="mb-5">
        <h4 class="text-primary mb-3" th:text="${dm.tenDanhMuc}"></h4>
        <div class="row">
          <th:block th:if="${#lists.isEmpty(khoaHocTheoDanhMuc[dm.danhmucId])}">
            <div class="col-12">
              <p class="text-muted">
                Chưa có khoá học nào được duyệt trong danh mục này.
              </p>
            </div>
          </th:block>
          <th:block th:each="khoaHoc : ${khoaHocTheoDanhMuc[dm.danhmucId]}">
            <div class="col-12 col-sm-6 col-lg-3 mb-4">
              <div class="card h-100 shadow-sm">
                <img
                  class="card-img-top"
                  th:src="${khoaHoc.anhBia}"
                  alt="Ảnh khoá học"
                />
                <div class="card-body d-flex flex-column pb-0">
                  <h5 class="card-title" th:text="${khoaHoc.tenKhoaHoc}"></h5>
                  <p class="card-text small text-muted mt-auto">
                    <i class="fas fa-chalkboard-teacher me-1"></i>
                    Giảng viên:
                    <span
                      th:text="${khoaHoc.giangVien?.taikhoan?.name ?: 'Đang cập nhật'}"
                    ></span>
                  </p>
                </div>
                <div class="card-footer pt-0">
                  <span
                    class="fw-bold text-danger me-2"
                    th:text="${#numbers.formatDecimal(khoaHoc.giaKhuyenMai != null && khoaHoc.giaKhuyenMai > 0 ? khoaHoc.giaKhuyenMai : khoaHoc.giagoc, 0, 'COMMA', 0, 'POINT') + ' ₫'}"
                  ></span>
                </div>
              </div>
            </div>
          </th:block>
        </div>
      </div>
    </main>
  </body>
</html>
