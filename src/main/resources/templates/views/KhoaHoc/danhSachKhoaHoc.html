<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Danh sách khóa học</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      .course-card {
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
      }
      .course-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
      }
      .card-img-top {
        height: 200px;
        object-fit: cover;
      }
      .card-footer {
        background-color: transparent;
        border-top: none;
      }
    </style>
  </head>
  <body>
    <div class="container mt-5">
      <h2 class="mb-4">Danh sách khóa học</h2>

      <div
        class="row mt-4"
        th:if="${khoaHocs != null and !#lists.isEmpty(khoaHocs)}"
      >
        <div class="col-md-4 mb-4" th:each="khoaHoc : ${khoaHocs}">
          <div class="card h-100 shadow-sm course-card">
            <img
              class="card-img-top"
              th:src="${khoaHoc.anhBia != null and !#strings.isEmpty(khoaHoc.anhBia) 
                        ? '/images/' + khoaHoc.anhBia 
                        : '/images/default.png'}"
              alt="Ảnh bìa"
            />

            <div class="card-body d-flex flex-column pb-0">
              <p
                class="text-muted small"
                th:if="${khoaHoc.danhMuc}"
                th:text="${khoaHoc.danhMuc.tenDanhMuc}"
              >
                Danh mục
              </p>
              <h5 class="card-title" th:text="${khoaHoc.tenKhoaHoc}">
                Tên khóa học
              </h5>
              <p
                class="card-text"
                th:text="${#strings.abbreviate(khoaHoc.moTa, 100)}"
              >
                Mô tả...
              </p>
              <p class="card-text small text-muted mt-auto">
                <i class="fas fa-chalkboard-teacher me-1"></i>
                <span
                  th:text="${khoaHoc.giangVien?.taikhoan?.name ?: 'Đang cập nhật'}"
                  >Tên giảng viên</span
                >
              </p>
            </div>

            <div class="card-footer pt-0">
              <div class="mb-2">
                <p
                  th:if="${khoaHoc.giaKhuyenMai != null and khoaHoc.giaKhuyenMai.doubleValue() > 0}"
                  class="card-text mb-0"
                >
                  <span
                    class="fw-bold text-danger me-2"
                    th:text="${#numbers.formatDecimal(khoaHoc.giaKhuyenMai, 0, 'COMMA', 0, 'POINT') + ' ₫'}"
                  ></span>
                  <del
                    class="text-muted"
                    th:text="${#numbers.formatDecimal(khoaHoc.giagoc, 0, 'COMMA', 0, 'POINT') + ' ₫'}"
                  ></del>
                </p>
                <p
                  th:if="${khoaHoc.giaKhuyenMai == null or khoaHoc.giaKhuyenMai.doubleValue() == 0}"
                  class="card-text fw-bold mb-0"
                >
                  <span
                    th:text="${#numbers.formatDecimal(khoaHoc.giagoc, 0, 'COMMA', 0, 'POINT') + ' ₫'}"
                  ></span>
                </p>
              </div>
              <a
                th:href="@{'/khoaHoc/' + ${khoaHoc.khoahocId}}"
                class="btn btn-primary w-100"
              >
                Xem chi tiết
              </a>
            </div>
          </div>
        </div>
      </div>

      <div th:if="${khoaHocs == null or #lists.isEmpty(khoaHocs)}">
        <p>Không có khóa học nào.</p>
      </div>
    </div>
  </body>
</html>
