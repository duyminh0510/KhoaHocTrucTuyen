<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sidebar dưới Header</title>
    <style>
      .fixed-top-nv {
        background-color: #0b1c36;
        height: 40px;
        width: 100%;
      }

      #toggle-btn {
        display: inline-block;
        margin-left: 15px;
        cursor: pointer;
        filter: invert(1);
        width: 30px;
        height: 20px;
      }

      #sidebar {
        position: absolute;
        top: 152px;
        left: 0;
        width: 250px;
        background-color: #0b1c36;
        transition: transform 0.3s ease;
        transform: translateX(-100%);
        z-index: 10;
      }

      #sidebar.active {
        transform: translateX(0);
      }

      #content {
        padding: 20px;
      }

      .nav-link {
        display: block;
        padding: 8px 16px;
        color: white;
        text-decoration: none;
      }

      #sidebar {
        position: absolute;
        top: 152px;
        /* 👈 Vị trí dưới thanh nav */
        left: 0;
        width: 250px;
        height: calc(100vh - 152px);
        /* 👈 Chiều cao phần còn lại của màn hình */
        background-color: #0b1c36;
        transition: transform 0.3s ease;
        transform: translateX(-100%);
        z-index: 10;
        overflow-y: auto;
        /* 👈 Cuộn nếu quá nhiều nội dung */
      }
    </style>
  </head>

  <body>
    <div class="nv-layout">
      <nav class="navbar fixed-top-nv position-relative">
        <div class="container-fluid position-relative">
          <!-- Nút 3 gạch bên trái -->
          <span
            id="toggle-btn"
            class="navbar-toggler-icon"
            style="
              position: absolute;
              left: 10px;
              top: 40%;
              transform: translateY(-50%);
              filter: invert(1);
            "
          >
          </span>

          <!-- Dòng chữ nằm giữa -->
          <div style="width: 100%; overflow: hidden; padding-left: 50px">
            <marquee
              behavior="scroll"
              direction="left"
              scrollamount="6"
              style="color: white; font-size: 18px; white-space: nowrap"
            >
              Quản lý hệ thống khóa học trực tuyến - Globaledu
            </marquee>
          </div>
        </div>
      </nav>

      <!-- Sidebar -->
      <div id="sidebar">
        <div class="p-3 border-bottom">
          <h4 style="color: white; text-align: center">QUẢN LÝ</h4>
        </div>
        <nav class="nav flex-column p-3">
          <!-- MỤC CHO NHÂN VIÊN -->
          <div th:if="${#authorization.expression('hasRole(''NHANVIEN'')')}">
            <a class="nav-link" th:href="@{/nhanvien/danhmuc}"
              >📦 Quản lý danh mục</a
            >
            <a class="nav-link" th:href="@{/nhanvien/quanly-thanh-toan}"
              >💳 Quản lý thanh toán</a
            >
            <a class="nav-link" th:href="@{/nhanvien/quanly-giao-dich}"
              >💰 Giao dịch khóa học</a
            >
            <a class="nav-link" th:href="@{/nhanvien/quanly-hocvien}"
              >👨‍🎓 Quản lý học viên</a
            >
            <a class="nav-link" th:href="@{/nhanvien/quanly-thong-bao-he-thong}"
              >📢 Thông báo hệ thống</a
            >
            <a class="nav-link" th:href="@{/nhanvien/quanly-thong-ke-he-thong}"
              >📊 Thống kê hệ thống</a
            >
            <a class="nav-link" th:href="@{/nhanvien/quanly-danh-gia-binh-luan}"
              >💬 Bình luận, đánh giá</a
            >
            <a class="nav-link" th:href="@{/nhanvien/khoahoccanduyet}"
              >✅ Duyệt khóa học</a
            >
          </div>

          <!-- MỤC CHO ADMIN -->
          <div th:if="${#authorization.expression('hasRole(''ADMIN'')')}">
            <a class="nav-link" th:href="@{/admin/danhmuc}"
              >📦 Quản lý danh mục</a
            >
            <a class="nav-link" th:href="@{/admin/quanly-thanh-toan}"
              >💳 Quản lý thanh toán</a
            >
            <a class="nav-link" th:href="@{/admin/quanly-giao-dich}"
              >💰 Giao dịch khóa học</a
            >
            <a class="nav-link" th:href="@{/admin/quanly-giangvien}"
              >🧑🏻‍🏫 Quản lý giảng viên</a
            >
            <a class="nav-link" th:href="@{/admin/quanly-hocvien}"
              >🧑🏻‍🎓 Quản lý học viên</a
            >
            <a class="nav-link" th:href="@{/admin/quanly-thong-bao-he-thong}"
              >📢 Thông báo hệ thống</a
            >
            <a class="nav-link" th:href="@{/admin/quanly-thong-ke-he-thong}"
              >📊 Thống kê hệ thống</a
            >
            <a class="nav-link" th:href="@{/admin/quanly-danh-gia-binh-luan}"
              >💬 Bình luận, đánh giá</a
            >
            <a class="nav-link" th:href="@{/admin/khoahoccanduyet}"
              >✅ Duyệt khóa học</a
            >

            <!-- Chỉ ADMIN có -->
            <a class="nav-link" th:href="@{/admin/quanly-nhanvien}"
              >👩‍💼 Quản lý nhân viên</a
            >
            <a class="nav-link" th:href="@{/admin/doanhthu}"
              >📊 Thống kê doanh thu</a
            >
          </div>
        </nav>
      </div>
    </div>

    <script>
      const toggleBtn = document.getElementById("toggle-btn");
      const sidebar = document.getElementById("sidebar");

      toggleBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        sidebar.classList.toggle("active");
      });

      document.addEventListener("click", (e) => {
        const isClickInside =
          sidebar.contains(e.target) || toggleBtn.contains(e.target);
        if (!isClickInside) {
          sidebar.classList.remove("active");
        }
      });
    </script>
  </body>
</html>
