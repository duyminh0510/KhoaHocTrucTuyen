<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Danh sách danh mục</title>
  </head>
  <body>
    <h1>Danh sách danh mục</h1>

    <!-- Form thêm/sửa dùng chung -->
    <form
      th:action="@{${danhmuc.danhmucId} != null ? '/danhmuc/edit' : '/danhmuc/add'}"
      th:object="${danhmuc}"
      method="post"
    >
      <input
        type="hidden"
        th:if="${danhmuc.danhmucId != null}"
        th:field="*{danhmucId}"
      />
      <input
        type="text"
        th:field="*{tenDanhMuc}"
        placeholder="Tên danh mục"
        required
      />
      <button
        type="submit"
        th:text="${danhmuc.danhmucId != null} ? 'Cập nhật' : 'Thêm'"
      >
        Thêm
      </button>
    </form>

    <p th:if="${#lists.isEmpty(danhmucs)}">Không có danh mục nào</p>

    <table border="1" th:if="${!#lists.isEmpty(danhmucs)}">
      <thead>
        <tr>
          <th>ID</th>
          <th>Tên danh mục</th>
          <th>Ngày tạo</th>
          <th>Sửa</th>
          <th>Xoá</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="dm : ${danhmucs}">
          <td th:text="${dm.danhmucId}">1</td>
          <td th:text="${dm.tenDanhMuc}">Tên</td>
          <td th:text="${#dates.format(dm.ngayTao, 'dd/MM/yyyy HH:mm')}">
            Ngày tạo
          </td>
          <td>
            <a th:href="@{'/danhmuc/edit/' + ${dm.danhmucId}}">Sửa</a>
          </td>
          <td>
            <form
              th:action="@{'/danhmuc/delete/' + ${dm.danhmucId}}"
              method="post"
            >
              <button
                type="submit"
                onclick="return confirm('Bạn có chắc muốn xoá không?');"
              >
                Xoá
              </button>
            </form>
          </td>
        </tr>
      </tbody>
    </table>
  </body>
</html>
